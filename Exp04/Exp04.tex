%!Mode:: "TeX:UTF-8"
\documentclass[a4paper,11pt,UTF8]{ctexart}

\usepackage{indentfirst} %缩进
\usepackage{xeCJK}    %使用系统字体
\usepackage{fancyhdr} %自定义页眉页脚
\pagestyle{empty}                   %不设置页眉页脚
\usepackage{amsmath, amsthm, amssymb, amsfonts} %数学公式
\usepackage[a4paper,left=3cm,right=3cm,top=3cm,bottom=3cm]{geometry}
%\usepackage[tmargin=1in,bmargin=1in,lmargin=1.25in,rmargin=1.25in]{geometry}.
\usepackage{booktabs} %插入表格
\usepackage[section]{placeins} %避免浮动
\usepackage{listings} %插入代码
\usepackage{ctex}     %中文宏包
\usepackage[svgnames, table]{xcolor} %彩色表格
\usepackage{algorithm}          %伪代码
\usepackage{algorithmicx}
\usepackage{algpseudocode}
\usepackage{algorithm,algpseudocode,float}
\usepackage{lipsum}
\usepackage{enumitem}           %调整列举环境
\usepackage{url}
\usepackage{fontspec,xunicode}
\defaultfontfeatures{Mapping=tex-text} %如果没有它，会有一些 tex 特殊字符无法正常使用，比如连字符。

\usepackage{upgreek}
\usepackage{graphicx}
\graphicspath{{imgs/}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 缩进及行间距
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setlength{\parindent}{22pt} %重新定义缩进长度
\setlength{\baselineskip}{20pt}  %定义行间距
%\renewcommand{\baselinestretch}{1.1} %定义行间距

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 列表设置
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setenumerate{fullwidth,itemindent=\parindent,listparindent=\parindent,itemsep=0ex,partopsep=0pt,parsep=0ex}
\setenumerate[2]{label=\alph*),leftmargin=1.5em}  %二级item设置
\setitemize{itemindent=38pt,leftmargin=0pt,itemsep=-0.4ex,listparindent=26pt,partopsep=0pt,parsep=0.5ex,topsep=-0.25ex}
\setdescription{itemindent=38pt,leftmargin=0pt,itemsep=-0.4ex,listparindent=26pt,partopsep=0pt,parsep=0.5ex,topsep=-0.25ex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 图的标题行间距设置
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\newcommand{\bottomcaption}{%
\setlength{\abovecaptionskip}{6pt}%
\setlength{\belowcaptionskip}{6pt}%
\caption}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 字体定义
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\setmainfont{Times New Roman}  %默认英文字体.serif是有衬线字体sans serif无衬线字体
\setmonofont{Consolas}
\setCJKmainfont[ItalicFont={楷体}, BoldFont={黑体}]{宋体}%衬线字体 缺省中文字体为
\setCJKsansfont{黑体}
\punctstyle{hangmobanjiao}
%-----------------------xeCJK下设置中文字体------------------------------%
\setCJKfamilyfont{song}{SimSun}                             %宋体 song
\newcommand{\song}{\CJKfamily{song}}
\setCJKfamilyfont{fs}{FangSong}                      %仿宋  fs
\newcommand{\fs}{\CJKfamily{fs}}
\setCJKfamilyfont{ktgb}{KaiTi}                      %楷体2312 ktgb
\newcommand{\ktgb}{\CJKfamily{ktgb}}
\setCJKfamilyfont{yh}{Microsoft YaHei}                    %微软雅黑 yh
\newcommand{\yh}{\CJKfamily{yh}}
\setCJKfamilyfont{hei}{SimHei}                              %黑体  hei
\newcommand{\hei}{\CJKfamily{hei}}
\setCJKfamilyfont{hwxk}{STXingkai}                                %华文行楷  hwxk
\newcommand{\hwxk}{\CJKfamily{hwxk}}
%------------------------------设置字体大小------------------------%
\newcommand{\shiyanbaogao}{\fontsize{36pt}{\baselineskip}\selectfont}
\newcommand{\chuhao}{\fontsize{42pt}{\baselineskip}\selectfont}     %初号
\newcommand{\xiaochuhao}{\fontsize{36pt}{\baselineskip}\selectfont} %小初号
\newcommand{\yihao}{\fontsize{28pt}{\baselineskip}\selectfont}      %一号
\newcommand{\erhao}{\fontsize{21pt}{\baselineskip}\selectfont}      %二号
\newcommand{\xiaoerhao}{\fontsize{18pt}{\baselineskip}\selectfont}  %小二号
\newcommand{\sanhao}{\fontsize{15.75pt}{\baselineskip}\selectfont}  %三号
\newcommand{\sihao}{\fontsize{14pt}{\baselineskip}\selectfont}       %四号
\newcommand{\xiaosihao}{\fontsize{12pt}{\baselineskip}\selectfont}  %小四号
\newcommand{\wuhao}{\fontsize{10.5pt}{\baselineskip}\selectfont}    %五号
\newcommand{\xiaowuhao}{\fontsize{9pt}{\baselineskip}\selectfont}   %小五号
\newcommand{\liuhao}{\fontsize{7.875pt}{\baselineskip}\selectfont}  %六号
\newcommand{\qihao}{\fontsize{5.25pt}{\baselineskip}\selectfont}    %七号

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 图题字体大小相同
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{caption}
\captionsetup{font={footnotesize}}   % footnotesize = 9pt
\captionsetup[lstlisting]{font={footnotesize}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 重定义枚举编号为 1),2)...
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand{\labelenumi}{\theenumi)}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 标题名称中文化
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\renewcommand\figurename{\hei 图}
\renewcommand\tablename{\hei 表}
\renewcommand\lstlistingname{\hei 代码}
\renewcommand{\algorithmicrequire}{\textbf{输入:}}
\renewcommand{\algorithmicensure}{\textbf{输出:}}
\newtheorem{define}{定义}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 代码设置
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\lstset{
 columns=fixed,
 numbers=left,                                        % 在左侧显示行号
 numberstyle=\tiny\color{gray},                       % 设定行号格式
 frame=single,                                        % 单线背景边框
 breaklines=true,                                     % 设定LaTeX对过长的代码行进行自动换行
 keywordstyle=\color[RGB]{40,40,255},                 % 设定关键字颜色
 numberstyle=\footnotesize\color{darkgray},
 commentstyle=\it\color[RGB]{0,96,96},                % 设置代码注释的格式
 stringstyle=\rmfamily\slshape\color[RGB]{128,0,0},   % 设置字符串格式
 showstringspaces=false,                              % 不显示字符串中的空格
 language=java,                                        % 设置语言
 basicstyle=\linespread{1.0}\xiaowuhao\ttfamily,                      % 字体字号
 %lineskip=10pt,
 %baselinestretch=1,
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 伪代码分页
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\makeatletter
\renewcommand{\ALG@name}{算法}
\newenvironment{breakablealgorithm}
  {% \begin{breakablealgorithm}
   \begin{center}
     \refstepcounter{algorithm}% New algorithm
     \hrule height.8pt depth0pt \kern2pt% \@fs@pre for \@fs@ruled
     \renewcommand{\caption}[2][\relax]{% Make a new \caption
       {\raggedright\textbf{\ALG@name~\thealgorithm} ##2\par}%
       \ifx\relax##1\relax % #1 is \relax
         \addcontentsline{loa}{algorithm}{\protect\numberline{\thealgorithm}##2}%
       \else % #1 is not \relax
         \addcontentsline{loa}{algorithm}{\protect\numberline{\thealgorithm}##1}%
       \fi
       \kern2pt\hrule\kern2pt
     }
  }{% \end{breakablealgorithm}
     \kern2pt\hrule\relax% \@fs@post for \@fs@ruled
   \end{center}
  }
\makeatother

% =============================================
% Part 1 Edit the info
% =============================================

\newcommand{\major}{物理学院}
\newcommand{\name}{黄阅迅，李秋阳}
\newcommand{\stuid}{PB18020631,PB18020567}
\newcommand{\group}{20}
\newcommand{\newdate}{\today}


\newcommand{\course}{电子线路实验(1)}
\newcommand{\newtitle}{RC电路的频率特性}

% =============================================
% Part 1 Main document
% =============================================
\begin{document}
\thispagestyle{empty}
\begin{figure}[h]
  \begin{minipage}{0.6\linewidth}
    \centerline{\includegraphics[width=\linewidth]{logo.png}}
  \end{minipage}
  \hfill
  \begin{minipage}{.4\linewidth}
    \raggedleft
    \begin{tabular*}{.8\linewidth}{ll}
      学院： & \underline\major   \\
      姓名： & \underline\name    \\
      学号： & \underline\stuid   \\
      组号:  & \underline\group   \\
      日期： & \underline\newdate \\
    \end{tabular*}
  \end{minipage}
\end{figure}

\begin{table}[!htbp]
  \centering
  \begin{tabular*}{\linewidth}{llllll}
    课程名称：  \underline\course   \qquad\qquad 实验题目：  \underline\newtitle  
  \end{tabular*}
\end{table}

% =============================================
% Part 2 Main document
% =============================================

\section{实验目的}

请参看预习报告。

\section{实验原理}

请参看预习报告。

\section{实验内容与步骤}
\subsection{实验内容}
\begin{enumerate}
  \item 测试RC低通电路的频率特性（幅值/相角）。
  \item 测试RC串并联电路的频率特性（幅值/相角）。

  通过以上实验了解RC滤波电路的基本构造与频率特性。
\end{enumerate}
\subsection{实验步骤}
\subsubsection{RC低通电路}
如图 \ref{fig:LPF}所示连接电路。其中$R=2.2k\Omega,C=0.1\mu F$，并通过毫伏表调节输入电压有效值$U_{irms}=1V$。
测量不同频率下输出电压的有效值，并利用李萨如法测量出B值和A值以计算相角，测试范围为$50Hz-5kHz$，记录15组数据，并找出截止频率$f_c$并画出输入输出波形图。

画出频率特性图，并分析数据。

\begin{figure}[htbp]
  \centering
  \fbox{\includegraphics[width=0.5\linewidth]{LPF.PNG}}
  \caption{RC低通电路测试电路图}
  \label{fig:LPF}
  \end{figure}

\subsection{RC串并联电路}
如图 \ref{fig:BPF}所示连接电路。其中$R_1=R_2=2.2k\Omega,C_1=C_2=0.1\mu F$，并通过毫伏表调节输入电压有效值$U_{irms}=1V$。
测量不同频率下输出电压的有效值，并利用李萨如法测量出B值和A值以计算相角，测试范围为$50Hz-5kHz$，记录15组数据，并找出输出电压最大时对应的频率$f_0$。
在此频率前后各选取一个频率画输入输出电压波形图，以判断相角。

画出频率特性图，并分析数据。

\begin{figure}[htbp]
  \centering
  \fbox{\includegraphics[width=0.5\linewidth]{BPF.PNG}}
  \caption{RRC串并联电路测试电路图}
  \label{fig:BPF}
  \end{figure}

\newpage
\section{实验数据处理与分析}
\subsection{实验内容1}
  实验所测得的幅频特性曲线如图 \ref{fig:LPFH}所示（以下特性图频率坐标均为对数坐标）。可见转移函数的模随着频率的增大而减小，符合低通
  电路的特性，而实验测得的截止频率为$683Hz$。
  
  \begin{figure}[htbp]
    \centering
    \fbox{\includegraphics[width=0.5\linewidth]{LPFH.png}}
    \caption{RC低通电路幅频特性}
    \label{fig:LPFH}
    \end{figure}

  实验测得的相频曲线如图 \ref{fig:LPFPhi}所示。可见输出相角是滞后的，滞后值随着频率的增大而增大，当频率极大时逼近
  $-90°$角。
  \begin{figure}[htbp]
    \centering
    \fbox{\includegraphics[width=0.5\linewidth]{LPFPhi.png}}
    \caption{RC低通电路相频特性}
    \label{fig:LPFPhi}
    \end{figure}

  频率特性曲线基本与理论预测吻合。实验测得截止频率的波形图如附图一所示，可见相角的确是滞后的。
  由波形图计算出的相角为：
  \begin{equation}
    |\Delta \phi|=46.7^\circ
  \end{equation}
  而由李萨如图像法计算出的相角差为$45.3^\circ$，可见有一定差异，这个支持了误差主要来源于读数误差的判断。
\subsection{误差分析1}
  理论给出的截止频率为：
  \begin{equation}
    f_c=\frac{1}{2\pi RC}\approx723Hz
  \end{equation}
  频率特性曲线基本与理论预测吻合，但可见，实验所测得的值与理论上仍有一定误差，相对误差为$5.53\%$，但实验上确定该频率值是通过观察毫伏表的有效值为$0.707V$给定的，从数据值中可以看出用波形法测出的值和李萨如测出的值也有一定差异，
  本质上应该都是读数误差造成的。
  实际上在一定区间内（包括723Hz），该值几乎都没有太大变化，毫伏表无法精确测出。因此在实验精度要求范围内，这个误差是可以接受的。同时结合相角判断，
  此时测得的相角为$45.3^\circ$，相比理论值$45^\circ$偏大，若此处为精确读数，则预示着此时的频率值已偏大，这并不符合逻辑。因此，认为此处的误差主要来源于
  毫伏表读数误差，而非原件值不准因素。同时，实际上测量时，输入电压有一定波动，需要不断校准（实验中当小于或大于一定值时才会重新校准），可见原始数据中A的值有一定波动，这里也会造成一定的误差。

\subsection{实验内容2}
实验测得的幅频曲线与相频曲线分别如图 \ref{fig:BPFH}和图 \ref{fig:BPFPhi}所示。 可见基本上符合带通电路的理论特征，在中心频率前，相角超前，随着频率增大而相角逐渐减小，同时转移函数的模增大，当超过中心频率后反之，实验测得
的中心频率为$700Hz$，但实验上发现在$680-730Hz$区间，李萨如图像和毫伏表示数基本没有变化。
\begin{figure}[htbp]
  \centering
  \fbox{\includegraphics[width=0.5\linewidth]{BPFH.png}}
  \caption{RC带通电路幅频特性}
  \label{fig:BPFH}
  \end{figure}

  \begin{figure}[htbp]
    \centering
    \fbox{\includegraphics[width=0.5\linewidth]{BPFPhi.png}}
    \caption{RC带通电路相频特性}
    \label{fig:BPFPhi}
    \end{figure}
同时实验中选取了$250Hz$与$2500Hz$下的输入输出波形进行观察，其波形图如附图二，三所示。
可以计算出$250Hz$下有(直接利用波形图计算):
\begin{equation}
  |H(j\omega)|\approx0.276, |\Delta \phi|\approx42.3^\circ
\end{equation}
$2500Hz$下有：
\begin{equation}
  |H(j\omega)|\approx0.234, |\Delta \phi|\approx51.3^\circ
\end{equation}
\subsection{误差分析2}
实验测得的频率特性曲线基本与理论预测吻合。理论给出的中心频率为:
\begin{equation}
  f_0=\frac{1}{2\pi RC}\approx723Hz
\end{equation}
可以得到相对误差为$3.33\%$。相比上一个实验内容有所下降。但实验上发现$680-730Hz$区间示数都没有太大变化，可以认为此处的
误差主要是读数造成的。
同时可以计算出$250Hz$下频率特性的理论值为
\begin{equation}
  |H(j\omega)|\approx0.254, |\Delta \phi|\approx40.3^\circ
\end{equation}
$2500Hz$下频率特性的理论值为
\begin{equation}
  |H(j\omega)|\approx0.229, |\Delta \phi|\approx46.56^\circ
\end{equation}
转移函数模的相对误差分别为$8.66\%$和$2.18\%$，可见都有一定的误差，但在实验允许内，是可以接受的，但相角上误差较大，这些误差来源于示波器读数。相比其李萨如配合毫伏表的方法，各有优势，李萨如方法在相角上更加准确。
\section{实验总结}
通过本次实验，我们熟悉了RC滤波网络的频率特性，研究了低通电路和带通电路的各种特性。虽然结果有一定误差，但仍然在实验要求范围内，总体上与理论预测的符合度比较好。
频率特性曲线也与理论预测一致。但毫伏的测试电压有效值的方法不一定比示波器直接读出电压幅值好，并且示波器的在动态校准电压下无需改换接线，有一定优势。总体实验成果令人较为满意。
\section{实验思考题}
\subsection{两个不同频率的正弦信号能否测量其相位，为什么？}
\textbf{答：}不能。
\par 不同频率的正弦信号，如果用时域模式，触发沿是CH1或CH2。因为两个信号频率不同，所以必然有一个信号的图像是在随着时间平移的，这就使得测量相位差变得困难，因为相位差一直在变化。
\par 如果用X-Y模式，看李萨如图形，那么李萨如图形也是随着时间的变化而旋转变形的。在这种情况下椭圆的参数$A,~B$也难以测量。
\par 简而言之，不同频率的正弦信号，其相位差本身就是随着时间变化的，所以示波器图像在变化，因此难以测准。
\subsection{据你所知，测量频率、振幅和相位差有哪些方法？}
\textbf{答：}
\begin{enumerate}
 \item \textbf{测量频率：}
 \begin{enumerate}
  \item 示波器电压图像上直接测量（手动或自动测量）。
  \item 将信号与一已知频率信号混合，测量其拍的时间，从而可以推算出频率。
  \item 将信号与一已知频率信号混合，测量其李萨如图形，与标准图像比对可知频率之比。
  \item 文氏（Wien）电桥法：
  电路图如下：
  \begin{figure}[H]
   \centering
   \includegraphics{WienBridge}
   \caption{\kaishu 文氏电桥电路图}
  \end{figure}
  电桥平衡时，有：
  \[ \left( R_1+\frac{1}{j\omega_xC_1}\right )R_4 = 
     \left( \frac{1}{1/R_2+j\omega_xC_2} \right)R_3\]
  由此可以解得频率。其实可以设计很多种用电容和电感构造的电路去解频率，这只是其中的典型例子。
  \item 计数法。通过整流、放大等操作，将正弦信号的每个峰化为近似脉冲的信号，然后用芯片对脉冲频率进行计数，即可推知正弦信号的频率。
 \end{enumerate}
 \item \textbf{测量振幅：}
 \begin{enumerate}
  \item 示波器电压图像直接测量（手动或自动测量）。
  \item 万用表测量有效值后推算振幅。
  \item 毫伏表测量有效值后推算振幅。
 \end{enumerate}
 \item \textbf{测量相位差：}
 \begin{enumerate}
  \item 示波器上直接测出两图像的时间差，从而得知相位差。
  \item 将两个图线分别作为X-Y轴，作出李萨如图形，由此计算其相位差。
 \end{enumerate}
\end{enumerate}
\subsection{理论证明公式：$\theta=\sin^{-1}\frac{B}{A}$}
假设$x$方向和$y$方向的电压表达式为：
\[U_x=U_a\cos(\omega t+\phi_1),~U_a>0\]
\[U_y=U_a\cos(\omega t+\phi_2),~U_b>0\]
\par 先计算$A$。$\frac{A}{2}$的物理含义是：$x$方向电压取到的最大值，也就是$U_a$。
\par 再计算$B$。$\frac{B}{2}$是在$y$方向电压为0时$x$方向电压的取值绝对值，由此计算。
当$y$向电压为0时：
\[ \omega t+\phi_2 = k\uppi+\frac{\uppi}{2} \]
\[ \omega t = k\uppi+\frac{\uppi}{2}-\phi_2 \]
再代入$x$向电压：
\[ U_x=U_a\cos(\omega t+\phi_1)
=U_a\cos(k\uppi+\frac{\uppi}{2}+\phi_1-\phi_2)
=\pm U_a\sin(\phi_1-\phi_2) \]
所以：
\[ \frac{B}{A} = \frac{U_a\sin(\phi_1-\phi_2)}{U_a}=\sin(\phi_1-\phi_2) \]
\[ \phi_1-\phi_2 = \sin^{-1}\frac{B}{A} \]
证毕。
\subsection{根据本次实验结果，总结选频电路的作用}
选频电路存在一个共振频率。当频率等于共振频率时，放大系数最大，而且相移为0。所以如果在电路的输入端输入一个多频率混合的信号，那么只有频率在共振范围量级内的信号才能得到比较大的放大系数，而其它的高频低频信号，其放大系数都很小，于是相当于对应频率波形在输出中被滤去了，达到了选频的目的。
\end{document}
